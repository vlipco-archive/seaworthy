#!/bin/bash
set -eo pipefail
unset GIT_DIR

buildpack_revision="1"
bundler_version="1.6.1"
ruby_version="ruby-2.1.1"
patch_level="76"

build_dir="$1"
cache_dir="$2"

bin_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
buildpack_dir=$(cd "$bin_dir/.." && pwd)

import() {
  source "$bin_dir/compile-lib/$1.sh"    
}

mkdir -p $build_dir
mkdir -p $cache_dir

cd "$build_dir"

profile_dir="$build_dir/profile.d"
mkdir -p $profile_dir

import "helpers"
import "initial-checks"
import "install-ruby"
import "install-bundle"